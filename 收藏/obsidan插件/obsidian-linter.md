# obsidian-linter 插件说明

## 插件简介
obsidian-linter 是 Obsidian 的一个代码和文本格式化插件，它可以自动检测并修复 Markdown 文件中的格式问题，帮助用户保持笔记的整洁和一致性。这个插件特别适合那些注重笔记格式、希望标准化文档风格的用户。

## 主要功能

### 1. 文本格式规范化
- 自动修复标题、列表、引用等元素的格式
- 标准化换行和段落间距
- 修复表格格式和对齐
- 规范化强调（粗体、斜体）语法

### 2. 代码块和语法高亮优化
- 自动检测和添加缺失的代码语言标识
- 规范化代码块缩进和格式
- 修复内联代码的格式问题
- 支持多种编程语言的格式优化

### 3. 链接和引用管理
- 修复破损的内部链接
- 标准化链接和引用的格式
- 自动检测和移除无效链接
- 优化图片链接和嵌入格式

### 4. 元数据和前置内容处理
- 规范化 YAML 前置元数据格式
- 修复标签和属性的格式问题
- 标准化日期和时间格式
- 支持自定义元数据处理规则

## 安装方法
1. 在 Obsidian 的设置中打开社区插件
2. 禁用安全模式
3. 点击"浏览社区插件"
4. 搜索"obsidian-linter"
5. 点击"安装"，然后启用插件

## 使用教程

### 手动格式化笔记
- 打开需要格式化的笔记
- 使用命令面板（Ctrl+P）搜索并选择"Lint current file"
- 插件会自动检测并修复笔记中的格式问题
- 查看格式化后的结果

### 设置自动格式化
- 在插件设置中，启用"Lint on save"
- 设置完成后，每次保存笔记时插件会自动进行格式化
- 可以选择是否显示格式化的变更通知

### 配置格式化规则
- 在插件设置中，浏览可用的格式化规则
- 启用或禁用特定的规则
- 为每个规则配置详细的参数和选项
- 可以保存和加载不同的规则配置方案

### 批量格式化笔记
- 在文件浏览器中选择多个笔记或文件夹
- 右键点击，选择"Lint selected files"
- 插件会批量处理选中的所有笔记
- 查看批量处理的结果报告

## 配置选项说明

### 通用设置
- **Lint on save**: 保存时自动格式化
- **Show status bar toggle**: 在状态栏显示切换按钮
- **Show notification on lint**: 格式化后显示通知
- **Log level**: 设置日志级别
- **Format on file create**: 创建新文件时自动格式化

### 文本规则设置
- **Normalize heading levels**: 规范化标题级别
- **Normalize list indentation**: 规范化列表缩进
- **Remove trailing whitespace**: 移除行尾空白
- **Insert final newline**: 在文件末尾插入换行
- **Normalize line breaks**: 规范化换行符
- **Set line length**: 设置行长度限制
- **Convert bullet list markers**: 转换无序列表标记
- **Format bold and italic text**: 格式化粗体和斜体文本

### 链接和图片规则设置
- **Fix link text**: 修复链接文本
- **Remove markdown links**: 移除Markdown链接
- **Normalize image links**: 规范化图片链接
- **Update internal links**: 更新内部链接
- **Remove empty links**: 移除空链接

### YAML和前置元数据规则设置
- **Fix YAML indentation**: 修复YAML缩进
- **Remove trailing commas in YAML**: 移除YAML中的尾部逗号
- **Sort YAML properties**: 排序YAML属性
- **Ensure YAML exists**: 确保YAML存在
- **Remove empty YAML**: 移除空YAML
- **Set YAML key order**: 设置YAML键顺序

## 高级功能

### 自定义规则配置
- 支持创建和应用自定义的格式化规则
- 可以基于文件类型应用不同的规则集
- 支持使用正则表达式定义自定义规则
- 可以导入和导出规则配置

### 格式化预设方案
- 提供多种预设的格式化方案（如学术、技术文档等）
- 可以自定义和保存多个格式化配置方案
- 支持根据笔记类型自动选择格式化方案
- 可以快速切换不同的格式化策略

### 格式化预览和比较
- 提供格式化前后的对比预览
- 可以查看每次格式化的具体变更
- 支持撤销和重做格式化操作
- 提供变更统计和分析

### 集成与扩展
- 可以与其他插件集成（如编辑器主题、代码块等）
- 支持通过API扩展格式化功能
- 可以创建自定义的格式化脚本
- 支持多语言格式化规则

## 注意事项
- 某些格式化规则可能会改变笔记的原始布局和结构
- 在对重要笔记应用格式化前，建议先备份
- 自定义规则设置可能需要一定的正则表达式知识
- 与某些特殊格式或自定义语法可能存在兼容性问题
- 批量格式化大量笔记可能会消耗较多系统资源

## 常见问题解答

### Q: 如何避免某些笔记被格式化？
A: 可以在笔记的YAML前置元数据中添加 `linter-ignore: true` 标记，或者在插件设置中配置排除规则。

### Q: 格式化会影响笔记的内容吗？
A: 格式化主要影响笔记的格式和布局，不应该改变笔记的实际内容。但某些规则（如修复链接）可能会修改笔记中的链接文本。

### Q: 如何创建自定义的格式化规则？
A: 在插件设置的"Custom rules"部分，可以配置自定义规则，包括正则表达式匹配和替换模式。

### Q: 格式化后的笔记与其他Markdown编辑器兼容吗？
A: 是的，obsidian-linter 使用标准的Markdown格式规则，格式化后的笔记应该与大多数Markdown编辑器兼容。