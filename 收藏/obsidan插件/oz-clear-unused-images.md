# oz-clear-unused-images 插件说明

## 插件简介
oz-clear-unused-images 是 Obsidian 的一个图片管理清理插件，它专门用于识别和清理笔记库中未被引用的图片文件。这个插件特别适合那些在笔记中使用大量图片、希望保持笔记库整洁、减少存储空间占用的用户，可以帮助他们有效地管理图片资源。

## 主要功能

### 1. 未使用图片检测
- 扫描 Obsidian 库中的所有图片文件
- 检测哪些图片未被任何笔记引用
- 提供直观的未使用图片列表
- 支持按文件大小、创建日期等排序

### 2. 图片清理操作
- 提供预览未使用图片的功能
- 支持选择单个或多个图片进行清理
- 可以将未使用的图片移动到回收站或指定文件夹
- 提供清理确认和安全保障机制

### 3. 忽略列表管理
- 支持将特定图片添加到忽略列表
- 可以基于文件路径、类型或文件夹设置忽略规则
- 提供忽略列表的导入和导出功能
- 可以查看和管理已忽略的图片

### 4. 扫描和报告功能
- 提供详细的扫描报告
- 显示节省的存储空间统计
- 可以导出扫描结果为文件
- 支持定期自动扫描（可选）

## 安装方法
1. 在 Obsidian 的设置中打开社区插件
2. 禁用安全模式
3. 点击"浏览社区插件"
4. 搜索"oz-clear-unused-images"
5. 点击"安装"，然后启用插件

## 使用教程

### 扫描未使用的图片
- 在 Obsidian 的侧边栏中找到插件图标并点击
- 或者在命令面板中搜索"Scan for unused images"
- 等待插件完成扫描过程
- 查看扫描结果，包括未使用的图片列表和统计信息

### 预览和清理图片
- 在扫描结果中，点击图片预览其内容
- 选择要清理的图片（可以多选）
- 点击"清理所选图片"按钮
- 在弹出的确认对话框中确认操作
- 查看清理结果报告

### 管理忽略列表
- 在插件设置中，找到"忽略列表"部分
- 点击"添加到忽略列表"按钮
- 选择要忽略的图片或设置忽略规则
- 可以编辑或删除已有的忽略规则
- 使用导入/导出功能备份或迁移忽略列表

### 配置定期扫描
- 在插件设置中，找到"定期扫描"选项
- 启用定期扫描功能
- 设置扫描的频率和时间
- 配置扫描完成后的通知选项
- 可以选择是否自动清理检测到的未使用图片

## 配置选项说明

### 基本设置
- **Scan on startup**: 启动时自动扫描
- **Show notification after scan**: 扫描完成后显示通知
- **Auto-clean after scan**: 扫描后自动清理
- **Show preview images**: 显示图片预览
- **Include subfolders**: 包含子文件夹

### 扫描设置
- **Image file extensions**: 设置要扫描的图片文件扩展名
- **Scan interval**: 设置扫描间隔
- **Max scan depth**: 设置最大扫描深度
- **Exclude system folders**: 排除系统文件夹
- **Exclude hidden files**: 排除隐藏文件

### 清理设置
- **Cleanup method**: 设置清理方法（删除、移动到文件夹等）
- **Target folder for moved images**: 设置移动图片的目标文件夹
- **Delete empty folders after cleanup**: 清理后删除空文件夹
- **Confirm before deletion**: 删除前显示确认对话框
- **Create cleanup report**: 创建清理报告

### 忽略列表设置
- **Manage ignore list**: 管理忽略列表
- **Add ignore pattern**: 添加忽略模式
- **Import/export ignore list**: 导入/导出忽略列表
- **Enable regex patterns**: 启用正则表达式模式
- **Ignore recent images**: 忽略最近添加的图片

## 高级功能

### 智能图片分析
- 支持识别相似或重复的图片
- 提供图片内容分析和分类
- 可以基于图片内容提供保留建议
- 支持按图片质量或分辨率筛选

### 批量操作增强
- 支持更复杂的批量选择规则
- 可以基于文件大小、日期或类型批量选择
- 提供批量重命名或移动功能
- 支持批量添加水印或其他处理

### 备份与恢复
- 在清理前自动创建图片备份
- 支持查看和恢复已清理的图片
- 提供备份管理功能
- 可以设置备份保留策略

### 性能优化
- 提供增量扫描功能，只扫描新增或修改的文件
- 优化大型库的扫描性能
- 提供缓存机制加速重复扫描
- 可以调整扫描线程数和优先级

## 注意事项
- 在执行清理操作前，强烈建议先备份笔记库
- 某些图片可能通过非常规方式引用，插件可能无法检测到
- 定期检查忽略列表，确保不会误删重要图片
- 与其他图片管理插件可能存在兼容性问题
- 大型库的首次扫描可能需要较长时间

## 常见问题解答

### Q: 如何确保重要的图片不会被误删？
A: 您可以将重要的图片添加到忽略列表中，或者在清理前仔细检查扫描结果。此外，插件提供了确认对话框和备份功能，以进一步确保安全。

### Q: 插件如何检测图片是否被引用？
A: 插件主要通过扫描所有笔记文件，查找图片文件路径的引用。它支持标准的Markdown图片链接语法以及Obsidian特有的链接格式。

### Q: 可以排除某些文件夹不进行扫描吗？
A: 是的，在插件设置中，您可以配置要排除的文件夹路径，这些文件夹中的图片将不会被扫描和处理。

### Q: 如何恢复误删的图片？
A: 如果您在清理前创建了备份，可以通过插件的备份管理功能恢复误删的图片。如果使用的是移动到回收站的清理方式，也可以从回收站中恢复。