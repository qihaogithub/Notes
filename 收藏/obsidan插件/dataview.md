# Dataview 插件说明

## 插件简介
Dataview 是 Obsidian 中功能强大的数据查询和展示插件，它允许用户使用类 SQL 语法在 Obsidian 笔记库中查询、过滤和展示结构化数据。通过 Dataview，你可以将 Obsidian 转变为一个轻量级的数据库，实现笔记内容的动态组织和展示。

## 主要功能

### 1. 数据查询功能
- 支持类似 SQL 的查询语言（Dataview Query Language）
- 可以根据元数据、标签、链接等多种条件查询笔记
- 支持复杂的逻辑运算符和比较运算符

### 2. 数据展示方式
- 表格视图：以表格形式展示查询结果
- 列表视图：以列表形式展示查询结果
- 任务视图：专门用于展示和管理任务
- 日历视图：以日历形式展示带日期的数据

### 3. 元数据支持
- 自动识别 YAML 前置元数据
- 支持内联字段（如 `字段:: 值` 格式）
- 支持多种数据类型：文本、数字、日期、布尔值、列表等

### 4. 动态内容更新
- 查询结果会随着笔记内容的变化自动更新
- 支持实时预览查询结果
- 可以在笔记中嵌入动态更新的数据视图

## 安装方法
1. 在 Obsidian 的设置中打开社区插件
2. 禁用安全模式
3. 点击"浏览社区插件"
4. 搜索"Dataview"
5. 点击"安装"，然后启用插件

## 使用教程

### 基本查询语法
Dataview 查询通常以代码块形式嵌入到笔记中：
````
```dataview
TABLE|LIST|TASK|CALENDAR [字段1, 字段2, ...]
FROM [搜索范围]
WHERE [过滤条件]
SORT [排序字段] [ASC/DESC]
LIMIT [限制数量]
```
````

### 示例：创建笔记表格
显示所有带标签 `#项目` 的笔记，包含标题、创建日期和状态字段：
````
```dataview
TABLE title, created, status
FROM #项目
WHERE status != "已完成"
SORT created DESC
```
````

### 示例：列出未完成任务
显示所有未完成的任务：
````
```dataview
task
FROM "笔记"
WHERE !completed
SORT due ASC
```
````

## 高级功能

### 内联字段
可以在笔记正文中直接添加数据字段：
```
项目名称:: 客户管理系统
开始日期:: 2023-01-15
预计完成:: 2023-03-30
负责人:: [[张三]]
状态:: 进行中
```

### 数据计算
支持基本的数学运算和函数：
````
```dataview
TABLE 价格, 数量, 价格 * 数量 AS 总价
FROM #商品
```
````

### 分组和聚合
可以对数据进行分组和聚合操作：
````
```dataview
TABLE rows.file.link AS 笔记, length(rows) AS 数量
FROM #标签
GROUP BY tag
SORT length(rows) DESC
```
````

## 配置选项说明

### 基本设置
- **Enable JavaScript Queries**: 启用 JavaScript 查询功能
- **Show inline field values**: 在阅读视图中显示内联字段的值
- **Enable table sorting**: 允许表格视图排序

### 性能优化
- **Cache time**: 设置数据缓存时间，影响更新频率
- **Maximum result size**: 限制查询结果的最大数量
- **Disable automatic Dataview indexing**: 禁用自动索引（高级用户选项）

## 注意事项
- 对于大型笔记库，首次索引可能需要一定时间
- 复杂的查询可能会影响性能，建议适当优化查询条件
- JavaScript 查询功能强大但有安全风险，使用时请注意
- 与某些插件可能存在兼容性问题，如遇到问题可尝试禁用其他插件排查

## 常见问题解答

### Q: 为什么我的查询没有返回结果？
A: 请检查查询语法是否正确，以及查询范围和条件是否合适。可以尝试简化查询条件逐步排查。

### Q: 如何提高查询性能？
A: 可以缩小查询范围，减少不必要的字段和复杂计算，适当增加缓存时间。

### Q: 能否在移动设备上使用 Dataview？
A: Dataview 支持移动设备，但由于性能限制，复杂查询可能在移动设备上运行较慢。

### Q: 如何学习更多高级查询技巧？
A: 可以参考 Dataview 官方文档，或在 Obsidian 社区中查找示例和教程。