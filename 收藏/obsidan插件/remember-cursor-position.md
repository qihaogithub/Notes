# remember-cursor-position 插件说明

## 插件简介
remember-cursor-position 是 Obsidian 的一个用户体验增强插件，它能够记住用户在每个笔记文件中最后编辑或查看的光标位置，并在下次打开该文件时自动恢复到该位置。这个插件特别适合那些经常在多个长笔记之间切换、需要持续进行研究或写作的用户，可以大大提高工作效率和流畅度。

## 主要功能

### 1. 光标位置记忆
- 自动记录每个文件的最后光标位置
- 在打开文件时自动恢复光标位置
- 支持在不同设备间同步光标位置信息（如果使用同步服务）
- 可以手动保存当前光标位置
- 支持多个编辑区域的位置记忆

### 2. 视图状态恢复
- 记住文件的滚动位置
- 恢复折叠/展开的标题状态
- 保存选中的文本区域
- 记住活动的编辑模式（源代码/所见即所得）
- 支持多列布局的视图恢复

### 3. 自定义恢复行为
- 可以设置特定文件类型的恢复规则
- 支持按文件路径或标签配置恢复行为
- 可以选择是恢复到最后编辑位置还是上次查看位置
- 提供忽略列表，排除不需要恢复位置的文件
- 支持设置恢复延迟，避免快速切换文件时的性能问题

### 4. 高级管理功能
- 可以查看和管理已保存的光标位置数据
- 提供清除特定文件位置数据的功能
- 支持导出和导入位置数据
- 可以重置所有位置记忆
- 提供位置数据备份和恢复功能

## 安装方法
1. 在 Obsidian 的设置中打开社区插件
2. 禁用安全模式
3. 点击"浏览社区插件"
4. 搜索"remember-cursor-position"
5. 点击"安装"，然后启用插件

## 使用教程

### 基本使用
- 安装并启用插件后，默认情况下会自动记录和恢复光标位置
- 正常编辑和浏览笔记，插件会在后台工作
- 关闭文件后再次打开，光标会自动恢复到上次的位置
- 滚动位置和视图状态也会相应恢复

### 手动保存和恢复
- 在命令面板中搜索"Remember Cursor Position: Save Current Position"手动保存当前位置
- 使用"Remember Cursor Position: Restore to Last Position"命令手动恢复到最后位置
- 可以为这些操作分配自定义快捷键以提高效率
- 右键点击文件标签，查看相关位置操作选项

### 配置恢复行为
- 在插件设置中，找到"恢复行为"部分
- 配置默认的恢复策略（编辑位置或查看位置）
- 设置恢复延迟时间，避免频繁切换时的闪烁
- 配置是否恢复折叠状态和滚动位置
- 调整高级恢复选项以满足特定需求

### 管理位置数据
- 在插件设置中，找到"位置数据管理"部分
- 查看当前保存的所有位置数据
- 使用搜索功能查找特定文件的位置数据
- 清除或重置单个文件的位置数据
- 导出位置数据用于备份或迁移

## 配置选项说明

### 基本设置
- **Enable position tracking**: 启用位置跟踪
- **Auto-save interval**: 设置自动保存间隔
- **Remember scroll position**: 记住滚动位置
- **Remember fold state**: 记住折叠状态
- **Remember selection**: 记住选择状态

### 恢复设置
- **Restore on file open**: 在文件打开时恢复
- **Restore delay (ms)**: 设置恢复延迟（毫秒）
- **Restore priority**: 设置恢复优先级（编辑位置/查看位置）
- **Restore in new panes**: 在新窗格中恢复
- **Restore across sessions**: 在会话间恢复

### 高级设置
- **Enable detailed tracking**: 启用详细跟踪
- **Max history per file**: 设置每个文件的最大历史记录数
- **Purge old data**: 清除旧数据
- **Data retention period (days)**: 设置数据保留期（天）
- **Enable debug logging**: 启用调试日志

### 忽略设置
- **Files to ignore**: 设置要忽略的文件
- **Folders to ignore**: 设置要忽略的文件夹
- **File types to ignore**: 设置要忽略的文件类型
- **Enable regex in ignore rules**: 在忽略规则中启用正则表达式
- **Apply ignore rules globally**: 全局应用忽略规则

## 高级功能

### 多光标位置管理
- 支持在一个文件中保存多个重要位置
- 可以为不同位置添加标签或描述
- 快速在多个保存的位置之间切换
- 提供位置管理面板，可视化查看和管理所有保存的位置
- 支持按时间或重要性排序保存的位置

### 智能恢复策略
- 根据文件类型和内容长度自动调整恢复行为
- 对于长文档，提供更精确的位置恢复
- 支持基于内容变化的位置自适应（如果文档内容发生变化）
- 提供位置恢复的容错机制
- 可以设置恢复失败时的后备行为

### 跨设备同步增强
- 优化位置数据的同步效率
- 提供冲突解决策略，处理多设备同时编辑的情况
- 支持位置数据的增量同步
- 可以设置同步优先级和策略
- 提供同步状态指示和诊断功能

### 工作流集成
- 与其他插件（如 Templater、QuickAdd 等）的无缝集成
- 支持在自动化工作流中使用位置数据
- 提供 API 接口供其他插件访问位置数据
- 可以通过脚本自定义恢复行为
- 支持与 Obsidian 的命令系统深度集成

## 注意事项
- 位置数据存储在 Obsidian 的配置文件中，请注意备份
- 在某些情况下，特别是文件内容发生显著变化时，位置恢复可能不准确
- 与某些编辑增强插件可能存在兼容性问题
- 大量的位置数据可能会略微增加 Obsidian 的启动时间
- 在移动设备上使用时，位置恢复的行为可能略有不同
- 建议定期清理旧的位置数据以保持系统性能

## 常见问题解答

### Q: 为什么我的光标位置没有正确恢复？
A: 这可能是由于文件内容发生了变化，导致原来的位置无效。尝试在内容稳定后再次保存位置。如果问题持续存在，请检查插件设置和兼容性。

### Q: 位置数据存储在哪里？会随同步服务同步吗？
A: 位置数据通常存储在 Obsidian 的应用数据目录中。如果您使用 Obsidian Sync 或其他同步服务，确保同步了相关的配置文件。

### Q: 可以禁用特定文件的位置记忆功能吗？
A: 是的，在插件设置的忽略列表中，您可以添加特定的文件、文件夹或文件类型，这些项目将不会被跟踪位置。

### Q: 如何清除所有位置数据？
A: 在插件设置中，找到"位置数据管理"部分，点击"清除所有数据"按钮。请注意，此操作不可撤销，建议在执行前备份数据。