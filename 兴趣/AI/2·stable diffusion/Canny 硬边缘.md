
![万字干货！一口气掌握14种 ControlNet 官方控图模型的使用方法！](https://image.uisdc.com/wp-content/uploads/2023/09/uisdc-sx-20230925-5.jpg)

Canny 硬边缘，它的使用范围很广，被作者誉为最重要的ControlNet 之一，该模型源自图像处理领域的边缘检测算法，可以识别并提取图像中的边缘特征并输送到新的图像中。

Canny 中只包含了 canny（硬边缘检测）这一种预处理器。下图中我们可以看到，canny 可以准确提取出画面中元素边缘的线稿，即使配合不同的主模型进行绘图都可以精准还原画面中的内容布局。

![万字干货！一口气掌握14种 ControlNet 官方控图模型的使用方法！](https://image.uisdc.com/wp-content/uploads/2023/09/uisdc-sx-20230925-6.jpg)

在选择预处理器时，我们可以看到除了 canny（硬边缘检测）还有 invert（白底黑线反色）的预处理器选项，它的功能并非是提取图像的空间特征，而是将线稿进行颜色反转。我们通过 Canny 等线稿类的预处理器提取得到的预览图都是黑底白线，但大部分的传统线稿都是白底黑线，为方便使用，很多时候我们需要将两者进行颜色转换，传统做法都是导出到 PS 等工具进行额外处理，非常繁琐。而 ControlNet 中贴心的内置了颜色反转的预处理功能，可以轻松实现将手绘线稿转换成模型可识别的预处理线稿图。

![万字干货！一口气掌握14种 ControlNet 官方控图模型的使用方法！](https://image.uisdc.com/wp-content/uploads/2023/09/uisdc-sx-20230925-7.jpg)

理解了 invert 的功能，我们就知道该预处理器并非 Canny 独有，而是可以配合大部分线稿模型使用。在最新版的 ControlNet 中，当我们选择 MLSD 直线、Lineart 线稿等控制类型时，预处理器中都能看到它的身影，后续就不挨个赘述了。

![万字干货！一口气掌握14种 ControlNet 官方控图模型的使用方法！](https://image.uisdc.com/wp-content/uploads/2023/09/uisdc-sx-20230925-8.jpg)

有些预处理器在选择后，下方会多出用于调节特征提取效果的特定参数，比如当我们选择 canny（硬边缘检测）时，下方会增加 Canny low threshold 低阈值和 Canny high threshold 高阈值 2 项参数。

![万字干货！一口气掌握14种 ControlNet 官方控图模型的使用方法！](https://image.uisdc.com/wp-content/uploads/2023/09/uisdc-sx-20230925-9.jpg)

先给大家解释下关于 canny 阈值参数的控制原理，以便你更好的理解其使用方法。在使用 canny 进行预处理时，提取的图像像素边缘线会被 2 个阈值参数划分为强边缘、弱边缘和非边缘 3 类，其中强边缘会直接保留，而非边缘的线稿会被忽略，处于中间弱边缘范围的线稿则会进行计算筛选。

以下面这张图为例，预处理过程中检测到 3 条边缘线，其中 D 点位于非边缘区域，因此直接被排除，而 A 点位于强边缘区域被保留。虽然 B、C 点都位于弱边缘区域，但由于 B 点和 A 点是直接相连的，因此 B 点也被保留，而与 C 点相连的线全都位于弱边缘区域所以被排除。由此得到画面中最终被保留的边缘线只有 AB 这条线。

![万字干货！一口气掌握14种 ControlNet 官方控图模型的使用方法！](https://image.uisdc.com/wp-content/uploads/2023/09/uisdc-sx-20230925-10.jpg)

理解了上面的概念，你也就知道阈值参数控制的实际上是边缘线被识别的区间范围，只要区间一致最终的线稿图就会完全一样。因此高低阈值参数之间实际上并没有高低之分，低阈值的数值同样可以比高阈值要大。

![万字干货！一口气掌握14种 ControlNet 官方控图模型的使用方法！](https://image.uisdc.com/wp-content/uploads/2023/09/uisdc-sx-20230925-11.jpg)

总结来看，Canny 高低阈值参数作用是控制预处理时提取线稿的复杂程度，两者的数值范围都限制在 1～255 之间。

下图中我们可以看到不同密度的预处理线稿图对绘图结果的影响，密度过高会导致绘图结果中出现分割零碎的斑块，但如果密度太低又会造成控图效果不够准确，因此我们需要调节阈值参数来达到比较合适的线稿控制范围。

![万字干货！一口气掌握14种 ControlNet 官方控图模型的使用方法！](https://image.uisdc.com/wp-content/uploads/2023/09/uisdc-sx-20230925-12.jpg)