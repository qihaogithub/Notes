## 入门 （宝宝模式）


1.  下载 vue-router

```
`npm i vue-router` 
```

2.  新建以下文件  
    Src/components/File 1. Vue：

```
`<template>
    <div>
        这是文件一
    </div>
</template>

<script setup lang="ts">

</script>

<style scoped>

</style>` 

```

Src/components/File 2. Vue：

```
`<template>
    <div>
        这是文件二
    </div>
</template>

<script setup lang="ts">

</script>

<style scoped>

</style>` 

```

在 src 下新建 router 文件夹  
在 router 文件夹下新建 router. Ts:

```
`import { createRouter,createWebHistory,createWebHashHistory } from 'vue-router'
import File1 from '../components/File1.vue'
import File2 from '../components/File2.vue'

const routes = [
    {
        path: '/',
        component:File1
    },
    {
        path: '/file2',
        component:File2
    }
]

const router = createRouter({
    
    history:createWebHashHistory(),
    routes,
})

export default router;` 

![](https://csdnimg.cn/release/blogv2/dist/pc/img/newCodeMoreWhite.png)

```

3.  修改 src/main. Ts

```
`import { createApp } from 'vue'
import './style.css'
import App from './App.vue'
import router from './router/router'

createApp(App).use(router).mount('#app')` 


```

4.  修改 src/components/HelloWorld. Vue:

```
`<script setup lang="ts">

</script>

<template>
    <router-view/>
    <button><router-link to="/">去文件一</router-link></button>
    <button><router-link to="/file2">去文件二</router-link></button> 
</template>

<style scoped>
</style>` 

```

5.  点击按钮能够切换成功则使用成功![](https://img-blog.csdnimg.cn/d2b41a0444574ea5b5e5e2912a809896.png)
    

## Vue -router 基础（青年模式）

### 一。动态路由匹配

#### 1. 带参数的动态路由匹配

当我们需要对每个用户加载同一个组件，但用户 id 不同。我们就需要在 vue-router 种使用一个动态字段来实现，再通过$routr. Params 来获取值：  
![](https://img-blog.csdnimg.cn/4a11e10724fa4ed0bec6a95556915019.png)

我们用具体实例来实现一下：

（1）修改 src/router/router. Ts:

```
`import { createRouter,createWebHistory,createWebHashHistory } from 'vue-router'
import File1 from '../components/File1.vue'
import File2 from '../components/File2.vue'

const routes = [
    {
        path: '/',
        component:File1
    },
    {
        path: '/file2/:username/abc/:userid', 
        component:File2
    }
]

const router = createRouter({
    history: createWebHistory(),
    
    routes,
})

export default router;` 

![](https://csdnimg.cn/release/blogv2/dist/pc/img/newCodeMoreWhite.png)

```

（2）修改组件 HelloWorld. Vue:  
![](https://img-blog.csdnimg.cn/74541ee118324102a67d23bdbfb8ae79.png)
  
(3) 修改组件 File 2. Vue：

```
`<template>
    <div>
        这是文件二
    </div>
</template>

<script setup lang="ts">
import {getCurrentInstance,onMounted } from 'vue'

const instance  = getCurrentInstance() 
if (instance != null) {
    const _this = instance.appContext.config.globalProperties 
    
onMounted(() => {
    console.log(_this.$route.params)
  })
}
</script>

<style scoped>

</style>` 

![](https://csdnimg.cn/release/blogv2/dist/pc/img/newCodeMoreWhite.png)


```

（4）点击去文件二按钮  
![](https://img-blog.csdnimg.cn/c2b9093e4e374030afb4500318976f05.png)
  
（5）查看控制台  
![](https://img-blog.csdnimg.cn/5265af9b2ab64a3d9936345fa35a8f24.png)

#### 2. 捕获所有路由或 404 Not Found 路由

当用户在导航栏乱输一通后，路由表中没有对应的路由，这时候，就需要将用户转去 404 页面。那么  
我们该如何处理呢？

(1) 修改 router/router. Ts:

```
`import { createRouter,createWebHistory,createWebHashHistory } from 'vue-router'
import File1 from '../components/File1.vue'
import File2 from '../components/File2.vue'
import NotFound from '../components/NotFound.vue'
import UserGeneric from '../components/UserGeneric.vue'

const routes = [
    {
        path: '/',
        component:File1
    },
    {
        path: '/file2/:username/abc/:userid',
        component:File2
    },
    
    {
        path: '/:pathMatch(.*)*', name: 'NotFound', component: NotFound
    },
    
    {
        path: '/user-:afterUser(.*)', component: UserGeneric
    },
]

const router = createRouter({
    history: createWebHistory(),
    
    routes,
})

export default router;` 

![](https://csdnimg.cn/release/blogv2/dist/pc/img/newCodeMoreWhite.png)

```

(2) 新建组件 NotFound. Vue:

```
`<template>
    <div>
        糟糕！页面没有找到。。。呜呜呜
    </div>
</template>

<script setup lang="ts">
import {getCurrentInstance,onMounted } from 'vue'

const instance  = getCurrentInstance() 
if (instance != null) {
    const _this = instance.appContext.config.globalProperties 
    
onMounted(() => {
    console.log(_this.$route.params)
  })
}
</script>

<style scoped>

</style>` 

![](https://csdnimg.cn/release/blogv2/dist/pc/img/newCodeMoreWhite.png)


```

(3) 修改 HelloWorld. Vue  
![](https://img-blog.csdnimg.cn/af4b45fc78aa4bb2a46a7c3fd1ef7c6c.png)
  
(4) 点击去 404 页面按钮（或者在地址栏乱写一通）  
![](https://img-blog.csdnimg.cn/67d3eb6823934f2892a0226053ea438b.png)
  
![](https://img-blog.csdnimg.cn/c5becec6cf994f968baaa6540af15068.png)
  
(5) 出现 404 页面，说明运行成功！！！

### 二。嵌套路由

路由是可以嵌套的。例如：  
![](https://img-blog.csdnimg.cn/3c623d5606c8463996f05cf58dad0eea.png)
  
嵌套的理解挺简单的，我就不多叭叭了，直接上代码，看完就懂了。  
（1）新建组件 Children 1. Vue:

```
`<template>
    <div>
        我是孩子1
    </div>
</template>

<script setup lang="ts">

</script>

<style scoped>

</style>` 


```

（2）新建组件 Children 2. Vue:

```
`<template>
    <div>
        我是孩子2
    </div>
</template>

<script setup lang="ts">

</script>

<style scoped>

</style>` 


```

(3) 修改 router/router. Ts：

```
`import { createRouter,createWebHistory,createWebHashHistory } from 'vue-router'
import File1 from '../components/File1.vue'
import File2 from '../components/File2.vue'
import NotFound from '../components/NotFound.vue'
import UserGeneric from '../components/UserGeneric.vue'
import Children1 from '../components/Children1.vue'
import Children2 from '../components/Children2.vue'

const routes = [
    {
        path: '/',
        component: File1,
        
    },
    {
        path: '/file2',
        component: File2,
        children: [  
            {
                path: 'children1',
                component:Children1
            },
            {
                path: 'children2',
                component:Children2
            },
        ]
    },
    {
        path: '/:pathMatch(.*)*', name: 'NotFound', component: NotFound
    },
    {
        path: '/user-:afterUser(.*)', component: UserGeneric
    },
]

const router = createRouter({
    history: createWebHistory(),
    
    routes,
})

export default router;` 

![](https://csdnimg.cn/release/blogv2/dist/pc/img/newCodeMoreWhite.png)


```

（4) 修改组件 HelloWorld. Vue：  
![](https://img-blog.csdnimg.cn/2eef2cab3b104072a06728f0fe8fd3ad.png)
  
(5) 修改组件 File 2. Vue：

```
`<template>
    <div>
        这是文件二
        <div>
            我是文件二里的内容
            <router-view/>
            <button><router-link to="/file2/children1">找孩子1</router-link></button>
            <button><router-link to="/file2/children2">找孩子2</router-link></button>
        </div>
    </div>
</template>

<script setup lang="ts">

</script>

<style scoped>

</style>` 

![](https://csdnimg.cn/release/blogv2/dist/pc/img/newCodeMoreWhite.png)

```

(6) 先点去文件二，再点击找孩子 1 按钮，出现即成功！！  
![](https://img-blog.csdnimg.cn/0f91f30a5e434a5c87dc1e8a01efe161.png)

### 三。编程式导航

除了使用/< router-link/> 创建 a 标签来定义导航链接，我们还可以借助 router 的实例方法，通过编写代码来实现。

#### 1.Router.Push () 方法的使用

(1) 修改组件 NotFound. Vue:

```
`<template>
    <div>
        糟糕！页面没有找到。。。呜呜呜
    </div>
</template>

<script setup lang="ts">
import {getCurrentInstance,onMounted } from 'vue'

const instance  = getCurrentInstance() 
if (instance != null) {
    const _this = instance.appContext.config.globalProperties 


    
    _this.$router.push('/file2/children2')

    
    

    
    

    
    


    onMounted(() => {
    console.log(_this.$route.params)
  })
}
</script>

<style scoped>

</style>` 

![](https://csdnimg.cn/release/blogv2/dist/pc/img/newCodeMoreWhite.png)


```

(2) 再点“去 404 页面”, 发现没有去 404 页面了，说明编程式导航成功！！  
![](https://img-blog.csdnimg.cn/8e2730a8e81947149d56122ca9a90604.png)

#### 2.Router.Replace () 方法的使用

它的作用类似于 router. Push，唯一不同的是，它在导航时不会向 history 添加新记录，正如它的名字所暗示的那样——它取代了当前的条目。

修改组件 NotFound. Vue：

```
`<template>
    <div>
        糟糕！页面没有找到。。。呜呜呜
    </div>
</template>

<script setup lang="ts">
import {getCurrentInstance,onMounted } from 'vue'

const instance  = getCurrentInstance() 
if (instance != null) {
    const _this = instance.appContext.config.globalProperties 

    
    
    

    
    

    
    

    
    

    
    _this.$router.replace('/file2/children1')

    onMounted(() => {
    console.log(_this.$route.params)
  })
}
</script>

<style scoped>

</style>` 

![](https://csdnimg.cn/release/blogv2/dist/pc/img/newCodeMoreWhite.png)


```

#### 3.Router.Go () 方法的使用

修改组件 NotFound. Vue：

```
`<template>
    <div>
        糟糕！页面没有找到。。。呜呜呜
    </div>
</template>

<script setup lang="ts">
import {getCurrentInstance,onMounted } from 'vue'

const instance  = getCurrentInstance() 
if (instance != null) {
    const _this = instance.appContext.config.globalProperties 

    
    
    

    
    

    
    

    
    

    
    

    
    _this.$router.go(-1)  

    onMounted(() => {
    console.log(_this.$route.params)
  })
}
</script>

<style scoped>

</style>` 

![](https://csdnimg.cn/release/blogv2/dist/pc/img/newCodeMoreWhite.png)


```