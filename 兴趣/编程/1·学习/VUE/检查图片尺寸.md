
```JavaScript
// useCheckImageSize.js

import { Modal } from "@arco-design/web-vue";
//导入了Arco Design的Modal组件，用于显示模态框。
export const useCheckImageSize = (rawFile, minSize, maxSize) => {
//1. 定义了一个名为`useCheckImageSize`的函数，它接受三个参数：`rawFile`（原始文件对象），`minSize`（最小尺寸对象），`maxSize`（最大尺寸对象）。
return new Promise((resolve, reject) => {
//函数返回一个新的Promise对象
const img = new Image();
//1. 创建一个Image对象用于加载图片。
const reader = new FileReader();
//1. 创建一个FileReader对象用于读取文件。
reader.onload = (e) => {
//1. 定义FileReader的`onload`事件处理函数，当读取文件成功时触发。
img.src = e.target.result;
//1. 在`onload`事件中，设置Image对象的`src`属性为读取到的数据。
img.onload = () => {
//1. 定义Image对象的`onload`事件处理函数，当图片加载完成后触发。
const width = img.naturalWidth;
//1. 在Image的`onload`事件中，获取图片的自然宽度和高度。
const height = img.naturalHeight;

let content = "";
//1. 定义一个字符串变量`content`用于存储错误信息。
  

//1. 接下来是一系列的条件判断，用以确定图片尺寸是否符合要求，并根据条件生成相应的错误信息。
// 情况六：minSize 和 maxSize 都存在且相等

if (

minSize &&
maxSize &&
minSize.width === maxSize.width &&
minSize.height === maxSize.height

) {

if (width !== minSize.width || height !== minSize.height) {

content = `本图片尺寸为 ${width}x${height}，应该是宽度=${minSize.width} ，高度=${minSize.height}`;

}

// 情况一：minSize 和 maxSize 都有，且 width 和 height 都不相同

} else if (

minSize &&

maxSize &&

minSize.width !== maxSize.width &&

minSize.height !== maxSize.height

) {

if (

width < minSize.width ||

width > maxSize.width ||

height < minSize.height ||

height > maxSize.height

) {

content = `本图片尺寸为 ${width}x${height}，应该是${minSize.width}≤宽度≤${maxSize.width} ，${minSize.height}≤高度≤${maxSize.height}`;

}

// 情况二：minSize 和 maxSize 都有，但其中的 width 相同

} else if (minSize && maxSize && minSize.width === maxSize.width) {

if (

width !== minSize.width ||

height < minSize.height ||

height > maxSize.height

) {

content = `本图片尺寸为 ${width}x${height}，应该是宽度=${minSize.width} ，${minSize.height}≤高度≤${maxSize.height}`;

}

// 情况三：minSize 和 maxSize 都有，但其中的 height 相同

} else if (minSize && maxSize && minSize.height === maxSize.height) {

if (

width < minSize.width ||

width > maxSize.width ||

height !== minSize.height

) {

content = `本图片尺寸为 ${width}x${height}，应该是${minSize.width}≤宽度≤${maxSize.width} ，高度=${minSize.height}`;

}

// 情况五：只有 minSize 或者 maxSize

} else if ((minSize && !maxSize) || (!minSize && maxSize)) {

if (

width !== (minSize || maxSize).width ||

height !== (minSize || maxSize).height

) {

content = `本图片尺寸为 ${width}x${height}，应该是宽度=${

(minSize || maxSize).width

} ，高度=${(minSize || maxSize).height}`;

}

}

  
//1. 如果生成了错误信息，则显示一个确认弹窗，用户可以选择继续上传或取消上传。
if (content) {

Modal.confirm({

title: "图片尺寸有误",

content: content,

okText: "继续上传",

cancelText: "取消上传",

onOk: () => resolve(true),

onCancel: () => reject("cancel"),

});

} else {

resolve(true); // 尺寸校验通过，允许上传
//1. 如果尺寸校验通过，则调用Promise的`resolve`方法，允许上传。
}

};

};

  
//1. 如果读取文件失败，则显示一个错误弹窗，并调用Promise的`reject`方法。
reader.onerror = (error) => {

Modal.error({

title: "图片读取失败",

content: "无法读取图片文件，请检查文件是否有效",

});

reject(error);

};

  
//1. 最后，调用FileReader的`readAsDataURL`方法，开始读取文件并将其转换为DataURL。
reader.readAsDataURL(rawFile);

});

};
```


