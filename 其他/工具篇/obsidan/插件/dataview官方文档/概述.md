
数据视图是您个人知识库上的实时索引和查询引擎。您可以将[添加元数据](https://blacksmithgu.github.io/obsidian-dataview/annotation/add-metadata/)到笔记中，并使用 [Dataview 查询语言](https://blacksmithgu.github.io/obsidian-dataview/queries/structure/)对其进行查询，以列出、筛选、排序或分组数据。数据视图使您的查询始终保持最新，并使数据聚合变得轻而易举。

你可以的
*   通过记录在每日笔记中来跟踪你的睡眠，并自动创建每周睡眠时间表。
*   自动收集指向笔记中书籍的链接，并根据评级将它们全部显示出来。
*   自动收集与今天的日期相关的页面，并将其显示在您的每日笔记中。
*   查找没有标记的页面以便后续处理，或者显示特定标记页面的漂亮视图。
*   创建动态视图，显示记录在笔记中的即将到来的生日或事件
还有更多的事情。

> [!note]
> 数据视图为您提供了一种快速搜索、显示和操作库中的索引数据的方法！


Dataview 是高度通用和高性能的，可以毫无问题地扩展到数十万个注释注释。

如果内置的[查询语言](https://blacksmithgu.github.io/obsidian-dataview/query/queries/)不能满足您的需要，那么您可以在数据视图 API 上运行任意的 JavaScript，并在您的笔记中构建您自己可能需要的任何实用程序。

> [!note]    
> DataView 用于显示，而不是编辑

DataView 用于显示和计算数据。它并不是为了编辑您的笔记/元数据，并将始终保持不变 (... 除非您通过 Dataview 检查任务。)

# 如何使用 Dataview

数据视图由两大构建块组成: **数据索引**和**数据查询**。

More details on the linked documentation pages

> [!note] 有关链接文档页面的详细信息
> 下面的部分将为您提供有关如何使用数据视图以及如何使用数据视图的一般概述。一定要访问链接页面，以了解更多关于各个部分。

### 数据索引

数据视图对 Markdown 文件中的元数据进行操作。它不能读取你保险库里的所有信息，只能读取特定的数据。你的一些内容，比如标签和项目符号 (包括任务) ，在 Dataview 是可以[自动获得](https://blacksmithgu.github.io/obsidian-dataview/annotation/add-metadata/#implicit-fields)的。您可以通过**字段**添加其他数据，可以在[每个 YAML Frontmatter](https://blacksmithgu.github.io/obsidian-dataview/annotation/add-metadata/#frontmatter) 文件的顶部添加，也可以通过 `[key:: value]` 语法在内容的中间添加[行内字段](https://blacksmithgu.github.io/obsidian-dataview/annotation/add-metadata/#inline-fields)。Dataview对这些数据进行**索引**，以便您可以查询这些数据。

> [!note] 
> 数据视图对[某些信息](https://blacksmithgu.github.io/obsidian-dataview/annotation/add-metadata/#implicit-fields) (如标记和列表项以及通过字段添加的数据)进行索引。数据视图查询中只有索引数据可用！


例如，文件可能如下所示:
```
--- 
作者: "埃德加 · 爱伦 · 坡" 
出版: 1845 
tags: 诗歌
--- 
# 乌鸦
从前，一个沉闷的午夜，当我虚弱而疲惫地沉思着，思考着许多被遗忘的离奇的传说—
```

或者像这样:
```
#诗歌
# 乌鸦
出自 [作者:: 埃德加 · 爱伦 · 坡],写在 (出版:: 1845) 
从前，一个沉闷的午夜，当我虚弱而疲惫地沉思着，思考着许多被遗忘的离奇的传说—
```

就索引元数据 (或者您可以查询的内容)而言，它们是相同的，只是注释风格不同。[如何注释元数据](https://blacksmithgu.github.io/obsidian-dataview/annotation/add-metadata/)取决于您自己和您的个人偏好。有了这个文件，您就可以使用**元数据字段**`作者` ，而 Dataview 提供的所有内容都会[自动作为隐式字段](https://blacksmithgu.github.io/obsidian-dataview/annotation/metadata-pages/)提供，比如标记或注释标题。

> [!note] 数据需要被索引
> 在上面的例子中，Dataview 没有这首诗本身: 它是一个段落，不是元数据字段，也不是 Dataview 自动索引的东西。它不是 Dataviews 索引的一部分，因此无法查询它。

### 数据查询

您可以在查询的帮助下访问索引数据。

有**三种不同的方式**可以编写一个查询: 在[Dataview Query Language](https://blacksmithgu.github.io/obsidian-dataview/queries/dql-js-inline/#dataview-query-language-dql) 的帮助下，作为一个[内联语句](https://blacksmithgu.github.io/obsidian-dataview/queries/dql-js-inline#inline-dql)，或者以最灵活但最复杂的方式: 作为一个 [Javascript Query](https://blacksmithgu.github.io/obsidian-dataview/queries/dql-js-inline#dataview-js)。

数据视图查询语言 (**Dataview Query Language，DQL**)为查询、显示和操作数据提供了广泛而强大的工具带。[内联查询](https://blacksmithgu.github.io/obsidian-dataview/queries/dql-js-inline#inline-dql)使您可以在便笺的任何位置精确地显示一个索引值。您也可以用这种方式进行计算。有了 DQL，在数据旅程中不需要任何 Javascript 就可以了。

DQL 查询由以下几部分组成:

*   只有一个[查询类型](https://blacksmithgu.github.io/obsidian-dataview/queries/query-types/)确定查询输出的外观
*   没有或只有一个[FROM 语句](https://blacksmithgu.github.io/obsidian-dataview/queries/data-commands#from)可以选择要查看的特定标记或文件夹 (或[其他源](https://blacksmithgu.github.io/obsidian-dataview/reference/sources/))
*  从无到多[其他数据命令](https://blacksmithgu.github.io/obsidian-dataview/queries/data-commands/)，帮助您过滤，分组和排序您想要的输出

例如，查询可以如下所示:

````
```dataview 
LIST 
```
````


上面列出了你保险库里的所有文件。


> [!note] 除查询类型之外的所有内容都是可选的
> 有效的 DQL 查询只需要查询类型 (在 [CALENDAR](https://blacksmithgu.github.io/obsidian-dataview/queries/query-types#calendar-queries) 上，是一个日期字段)


更受限制的查询可能如下所示:


````
```dataview
LIST
FROM #诗歌
WHERE 作者 = "Edgar Allan Poe"
```
````


它列出了你保险库里所有标有 # 诗歌的文件以及一个名为作者的[字段](https://blacksmithgu.github.io/obsidian-dataview/annotation/add-metadata/)，其值为`埃德加 · 爱伦 · 坡`。这个查询可以在上面找到我们的示例页面。

LIST 只是您可以使用的四种[查询类型](https://blacksmithgu.github.io/obsidian-dataview/queries/query-types/)中的一种。例如，使用 TABLE，我们可以在输出中添加更多的信息:

````
```dataview
TABLE 作者, 出版, file.inlinks AS "提到" 
FROM #poems 
```
````

这会返回一个结果，比如:
![](https://qhdtc.oss-cn-chengdu.aliyuncs.com/obsidian/20240320095954.png)


但是，这并不是数据视图功能的终点。还可以借助函数对数据进行[[操作]]。请注意，这些操作只在查询中进行——文件中的数据保持不变。

```` 
``` dataview
TABLE 作者, date(now).year - 出版 AS "年龄", length(file.inlinks) AS "提及次数" FROM #poems
```
```` 

![](https://qhdtc.oss-cn-chengdu.aliyuncs.com/obsidian/20240320095726.png)

> [!note] 你可[在此](https://blacksmithgu.github.io/obsidian-dataview/resources/examples/)找到更多例子。

正如您所看到的，数据视图不仅允许您快速地聚合数据并且总是最新的，它还可以帮助您进行操作，从而为您的数据集提供新的见解。浏览文档，了解更多关于如何与数据交互的信息。

用新的方式探索你的金库吧！

# 资源及协助

这个文档不是唯一可以帮助您完成数据旅程的地方。查看参考[资料和支持](https://blacksmithgu.github.io/obsidian-dataview/resources/resources-and-support/)以获得有用的页面和视频列表。